<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Biz ğŸ’–</title>

<style>
body{
  margin:0;font-family:'Segoe UI',sans-serif;
  background:radial-gradient(circle at top,#22002e,#000);
  color:#fff;text-align:center;overflow-x:hidden;
}
.hidden{display:none}
h1{text-shadow:0 0 25px #ff5fd2;font-size:2.5em}
button{
  background:linear-gradient(45deg,#ff4fd8,#7a00ff);
  border:none;color:#fff;padding:10px 20px;
  border-radius:25px;cursor:pointer;
  box-shadow:0 0 20px #ff4fd8;
  transition:.3s;margin:5px
}
button:hover{transform:scale(1.1)}
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(170px,1fr));
  gap:15px;margin:30px
}
.card{
  background:#111;border-radius:15px;
  box-shadow:0 0 20px rgba(255,90,200,.6);
  overflow:hidden;animation:pop .5s
}
.card img{width:100%;height:180px;object-fit:cover;cursor:pointer}
.vote{display:flex;justify-content:center;align-items:center;padding:5px}
.vote span{margin:0 8px;color:#ff7ad9;font-weight:bold}
.lightbox{
  position:fixed;inset:0;background:#000c;
  display:flex;justify-content:center;align-items:center;
  visibility:hidden;z-index:9
}
.lightbox img{max-width:90%;max-height:90%;border-radius:20px}
#pin{
  position:fixed;inset:0;background:#000c;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;z-index:10
}
#pin input{font-size:20px;padding:10px;border-radius:10px;border:none;width:120px;text-align:center}
.quote{font-style:italic;color:#ff9adf;font-size:1.2em;margin:10px}
canvas{position:fixed;top:0;left:0;z-index:0}
@keyframes pop{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
</style>
</head>

<body>

<div id="pin">
  <h1>PIN</h1>
  <input id="pinInput" type="password" maxlength="5">
  <button onclick="checkPin()">GiriÅŸ</button>
  <p id="pinMsg"></p>
</div>

<canvas id="fx"></canvas>

<div id="main" class="hidden">
  <h1>Bizim HikÃ¢yemiz ğŸ’–</h1>
  <div class="quote" id="quote"></div>

  <input type="file" id="fileInput" accept="image/*" hidden>
  <button onclick="fileInput.click()">FotoÄŸraf YÃ¼kle ğŸ“¸</button>

  <audio id="music" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3">
  </audio>
  <button onclick="toggleMusic()">MÃ¼zik ğŸµ</button>

  <div class="gallery" id="gallery"></div>
</div>

<div class="lightbox" id="lightbox" onclick="this.style.visibility='hidden'">
  <img id="lightboxImg">
</div>

<script>
/* AYARLAR */
const SITE_PIN="19422";
const CLOUD_NAME="BURAYA_YAZ";
const UPLOAD_PRESET="BURAYA_YAZ";

/* PIN */
function checkPin(){
  if(pinInput.value===SITE_PIN){
    pin.style.display="none";
    main.classList.remove("hidden");
    localStorage.setItem("unlocked","1");
  } else pinMsg.textContent="YanlÄ±ÅŸ PIN ğŸ˜…";
}
if(localStorage.getItem("unlocked")){pin.style.display="none";main.classList.remove("hidden")}

/* GÃœZEL SÃ–ZLER */
const quotes=[
  "Sen gÃ¼lÃ¼nce dÃ¼nya duruyor ğŸ’–",
  "Ä°yi ki varsÄ±n ğŸŒ¸",
  "Kalbim hep seninle âœ¨",
  "Biz bir mucizeyiz ğŸ’"
];
setInterval(()=>quote.textContent=quotes[Math.floor(Math.random()*quotes.length)],4000);

/* GALERÄ° + OY */
let items=JSON.parse(localStorage.getItem("gallery")||"[]");
function render(){
  gallery.innerHTML="";
  items.forEach((it,i)=>{
    const c=document.createElement("div");c.className="card";
    c.innerHTML=`
      <img src="${it.url}">
      <div class="vote">
        <button onclick="vote(${i},1)">ğŸ‘</button>
        <span>${it.votes}</span>
        <button onclick="vote(${i},-1)">ğŸ‘</button>
      </div>`;
    c.querySelector("img").onclick=()=>{lightboxImg.src=it.url;lightbox.style.visibility="visible"}
    gallery.prepend(c);
  });
}
function vote(i,v){
  items[i].votes=Math.max(0,items[i].votes+v);
  save();
}
function save(){localStorage.setItem("gallery",JSON.stringify(items));render()}
render();

/* UPLOAD */
fileInput.onchange=async()=>{
  const f=fileInput.files[0]; if(!f)return;
  const fd=new FormData();
  fd.append("file",f);
  fd.append("upload_preset",UPLOAD_PRESET);
  const r=await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,{method:"POST",body:fd});
  const d=await r.json();
  items.push({url:d.secure_url,votes:0});
  save();
}

/* MÃœZÄ°K */
function toggleMusic(){music.paused?music.play():music.pause()}

/* PARTÄ°KÃœL */
const ctx=fx.getContext("2d");
function resize(){fx.width=innerWidth;fx.height=innerHeight}
resize();onresize=resize;
let p=[...Array(80)].map(()=>({x:Math.random()*fx.width,y:Math.random()*fx.height,s:Math.random()+.3}))
function anim(){
  ctx.clearRect(0,0,fx.width,fx.height);
  ctx.fillStyle="#ff4fd8";
  p.forEach(o=>{o.y-=o.s;if(o.y<0)o.y=fx.height;ctx.beginPath();ctx.arc(o.x,o.y,2,0,7);ctx.fill()});
  requestAnimationFrame(anim)
}
anim();
</script>

</body>
</html>
